#mssql [[MSSQL]]
Определить эффективный способ доступа к необходимым данным делает оптимизатором запросов. Входные данные оптимизатора запросов включают сам запрос, схему базы данных (определения таблиц и индексов) и статистику базы данных. Оптимизатор запросов создает план выполнения

План выполнения запроса — это определение:
 -Последовательности, в которой происходит обращение к исходным таблицам
 -Методы, используемые для извлечения данных из каждой таблицы(по каким индексам итп)
 -Методы, используемые для вычислений, а также фильтрации, статистической обработки и сортировки данных из каждой таблицы

Хотя оптимизатор запросов SQL Server создает только один план выполнения, существует концепция предполагаемого плана выполнения, фактического плана выполнения и статистики динамических запросов:
-Предполагаемый план выполнения(estimated plan) возвращает скомпилированный план , созданный оптимизатором запросов, на основе оценок. Это план запроса, который хранится в кэше планов. Создание предполагаемого плана выполнения фактически не выполняет запрос или пакет, поэтому не содержит никаких сведений о среде выполнения, таких как фактические метрики использования ресурсов или предупреждения среды выполнения
-Фактический план выполнения(actual plan) возвращает скомпилированный план и контекст выполнения. Он станет доступным после выполнения запроса. Этот план включает фактические сведения о среде выполнения, такие как предупреждения о выполнении, а также в более новых версиях ядро СУБД, истекших и времени ЦП, используемого во время выполнения
-Статистика динамических запросов(live plan) возвращает скомпилированный план и контекст выполнения. Этот план доступен для выполнения запросов в тестовом режиме и обновляется каждую секунду. Сюда входят такие сведения о среде выполнения, как фактическое число строк, проходящих через операторы, затраченное время и предполагаемый ход выполнения запроса

Смотреть статистику в MS SQL - в сообщениях
set statistics io on
set statistics time on